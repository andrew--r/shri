!function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var o=n(16),r=(i(o),n(5)),s=i(r);window.app=new s.default(document.querySelector(".app"))},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return 180*e/Math.PI}function o(e,t,n,i){var o=e.x,r=e.x+t.x,s=n.x,a=n.x+i.x,u=e.y,c=e.y+t.y,l=n.y,p=n.y+i.y,f=o<s&&r>a,h=u<l&&c>p;return f&&h}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.radToDeg=i,t.isBoxInsideAnother=o;t.Vector2d=function(){function e(t,i){n(this,e),this.x=t,this.y=i}return r(e,null,[{key:"sum",value:function(t,n){return new e(t.x+n.x,t.y+n.y)}},{key:"distance",value:function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}},{key:"normalize",value:function(t,n){return new e(n.x-t.x,n.y-t.y)}},{key:"angle",value:function(e,t){var n=-1;return t.y>=0&&t.x-e.x<0&&(n=1),t.y<0&&t.x-e.x>0&&(n=1),n*i(Math.acos((e.x*t.x+e.y*t.y)/(Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))*Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2)))))}}]),e}()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t,i){function o(){this.isDisabled||this.openPopup()}function r(){this.closePopup()}n(this,e),this.number=t,this.onUnclockCallback=i,this.level=document.querySelector(".level_"+t),this.door=document.querySelector(".door_level_"+t),this.popup=document.querySelector(".popup_level_"+t),this.close=this.popup.querySelector(".popup__close"),this.isLocked=!0,this.isDisabled=this.door.classList.contains("door_disabled"),this.door.addEventListener("click",o.bind(this)),this.close.addEventListener("click",r.bind(this))}return i(e,[{key:"openPopup",value:function(){this.popup.classList.remove("popup_hidden")}},{key:"closePopup",value:function(){this.popup.classList.add("popup_hidden")}},{key:"enable",value:function(){this.door.classList.remove("door_disabled"),this.isDisabled=!1}},{key:"unlock",value:function(){this.door.classList.remove("door_locked"),this.isLocked=!1,this.closePopup(),this.onUnclockCallback(),this.showCongratulations()}},{key:"showCongratulations",value:function(){alert("Дверь "+this.number+" открыта!")}}]),e}();t.default=o},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(1),s=function(){function e(t){if(i(this,e),!t.name)throw new Error("Name must be specified to create an item");var n="game-item";this.id=Math.round(Math.random()*new Date),this.isInitialized=!1,this.node=document.createElement("div"),this.size=t.size||new r.Vector2d(32,32),this.classes={base:t.baseClass||n,initialized:(t.baseClass||n)+"_initialized",transitionDisabled:(t.baseClass||n)+"_transition-disabled"},this.defaultPosition=t.defaultPosition||new r.Vector2d(0,0),this.translate=new r.Vector2d(0,0),this.rotate=t.rotate||0,this.scale=t.scale||1;var o=this.node,s=this.classes;void 0===t.zIndex?this.zIndex=1:this.zIndex=t.zIndex,t.sprite&&(this.sprite=t.sprite),o.style.position="absolute",o.style.zIndex=this.zIndex,o.setAttribute("data-id",this.id),o.setAttribute("data-item-name",t.name),s.base&&o.classList.add(s.base)}return o(e,[{key:"initialize",value:function(){var e=this;this.render(function(){e.node.classList.add(e.classes.initialized)})}},{key:"destroy",value:function(){var e=this,t=this.node,n=this.classes;window.requestAnimationFrame(function(){t.setAttribute("style",""),t.classList.remove(n.initialized),e.isInitialized=!1})}},{key:"setRotate",value:function(e){this.rotate=e}},{key:"setScale",value:function(e){this.scale=e}},{key:"setSprite",value:function(e){var t=e.url,n=e.size,i=e.repeat;this.sprite||(this.sprite={}),t&&(this.sprite.url=t),n&&(this.sprite.size=n),i&&(this.sprite.repeat=i)}},{key:"setPosition",value:function(e,t){this.position=new r.Vector2d(e,t)}},{key:"setTranslate",value:function(e,t){this.translate=new r.Vector2d(e,t)}},{key:"updateSize",value:function(){var e=this.node,t=this.size;e.style.width=t.x+"px",e.style.height=t.y+"px"}},{key:"updatePosition",value:function(){var e=this.node,t=this.defaultPosition;e.style.left=t.x+"px",e.style.top=t.y+"px"}},{key:"updateTransform",value:function(){var e=this.node,t=this.translate,n=this.scale,i=this.rotate;e.style.transform="translate("+t.x+"px, "+t.y+"px) scale("+n+") rotate("+i+"deg)"}},{key:"updateSprite",value:function(){var e=this.node,t=this.sprite;t&&(t.url&&(e.style.backgroundImage="url("+t.url+")"),t.size&&(e.style.backgroundSize=t.size),t.repeat&&(e.style.backgroundRepeat=t.repeat))}},{key:"render",value:function(e){var t=this;window.requestAnimationFrame(function(){t.updateSprite(),t.updateSize(),t.updatePosition(),t.updateTransform(),"function"==typeof e&&e()})}},{key:"disableTransition",value:function(){this.node.classList.add(this.classes.transitionDisabled)}},{key:"enableTransition",value:function(){this.node.classList.remove(this.classes.transitionDisabled)}},{key:"show",value:function(){var e=this;window.requestAnimationFrame(function(){e.node.classList.remove(e.classes.hidden)})}},{key:"hide",value:function(){var e=this;window.requestAnimationFrame(function(){e.node.classList.add(e.classes.hidden)})}},{key:"on",value:function(e,t){var n=this;e.split(" ").map(function(e){return n.node.addEventListener(e,t)})}},{key:"off",value:function(e,t){var n=this;e.split(" ").map(function(e){return n.node.removeEventListener(e,t)})}},{key:"coordinates",get:function(){return r.Vector2d.sum(this.defaultPosition,this.translate)}}]),e}();t.default=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(3),c=i(u),l=(n(1),function(e){function t(e){o(this,t);var n=r(this,Object.getPrototypeOf(t).call(this,Object.assign({},e,{sprite:e.colors[e.currentColor]})));return n.colors=e.colors,n.currentColor=e.currentColor,n.sprite=e.colors[e.currentColor],n}return s(t,e),a(t,[{key:"switchColor",value:function(e){if(!this.colors[e])throw new Error(this.name+" doesn't support "+e+" color");this.currentColor=e,this.sprite=this.colors[e]}}]),t}(c.default));t.default=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(){function e(){for(var e=void 0,n=0;n<t.length;n++)if(t[n].isLocked){if(e&&t[n].isLocked){t[n].enable();break}}else e=!0}var t=[new s.default(0,e),new u.default(1,e),new l.default(2,e),new f.default(3,e)];this.doors=t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=n(7),s=i(r),a=n(8),u=i(a),c=n(9),l=i(c),p=n(6),f=i(p)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(1),c=n(2),l=i(c),p=n(13),f=i(p),h=function(e){function t(e,n){o(this,t);var i=r(this,Object.getPrototypeOf(t).call(this,e,n));return i.popupContent=i.popup.querySelector(".popup__content"),i.initializeLock(),i.initializeKey(),i}return s(t,e),a(t,[{key:"showCongratulations",value:function(){alert("Поздравляю! Игра пройдена!")}},{key:"initializeLock",value:function(){var e=new u.Vector2d(this.popupContent.clientWidth,this.popupContent.clientHeight),t=new u.Vector2d(196,196);this.jewelLock=new f.default({currentColor:"blueEmpty",rotate:-30,size:t,defaultPosition:new u.Vector2d(e.x/2-t.x/2,e.y/2-t.y/2)}),this.popupContent.appendChild(this.jewelLock.node),this.jewelLock.initialize()}},{key:"initializeKey",value:function(){var e=this,t=this.popupContent,n=new u.Vector2d(t.clientWidth,t.clientHeight),i=new u.Vector2d(64,64);this.jewelKey=new f.default({currentColor:"blueFilled",size:i,defaultPosition:new u.Vector2d(n.x/2-i.x/2,n.y/2-i.y/2)});var o={activePointers:[],initialDistance:null},r=function(t){var n=o.activePointers;if(2!==n.length){var i=new u.Vector2d(t.clientX,t.clientY);o.activePointers.push({id:t.pointerId,initialPosition:i,position:i}),2===n.length&&(o.initialScale=e.jewelKey.scale,o.baseVector=u.Vector2d.normalize(n[0].initialPosition,n[1].initialPosition),o.initialDistance=u.Vector2d.distance(n[0].initialPosition,n[1].initialPosition))}},s=function(e){var t=o.activePointers,n=function(e){return function(t){return t.id!==e}};o.activePointers=t.filter(n(e.pointerId))},a=function(t){var n=o.activePointers,i=o.initialDistance;if(2===n.length){var r=function(e){return function(t){return t.id===e}},s=n.filter(r(t.pointerId))[0];s.position=new u.Vector2d(t.clientX,t.clientY);var a=u.Vector2d.distance(n[0].position,n[1].position),c=a/i,l=o.initialScale-1,p=c>1?l+c:l*c,f=u.Vector2d.angle(o.baseVector,u.Vector2d.normalize(n[0].position,n[1].position));e.jewelKey.setScale(p),e.jewelKey.setRotate(f),e.jewelKey.render();var h=p>2.8&&p<3.2,d=f>-35&&f<-25;h&&d&&e.unlock()}};t.appendChild(this.jewelKey.node),t.addEventListener("pointerdown",r),t.addEventListener("pointermove",a),["pointerup","pointercancel"].map(function(e){return t.addEventListener(e,s)}),this.jewelKey.initialize()}}]),t}(l.default);t.default=h},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),u=i(a),c=function(e){function t(e,n){function i(e){e.target.classList.add("door-riddle__button_pressed"),a.apply(this)}function s(e){e.target.classList.remove("door-riddle__button_pressed")}function a(){var e=!0;c.forEach(function(t){t.classList.contains("door-riddle__button_pressed")||(e=!1)}),e&&this.unlock()}o(this,t);var u=r(this,Object.getPrototypeOf(t).call(this,e,n)),c=[u.popup.querySelector(".door-riddle__button_0"),u.popup.querySelector(".door-riddle__button_1"),u.popup.querySelector(".door-riddle__button_2")];return c.forEach(function(e){e.addEventListener("pointerdown",i.bind(u)),e.addEventListener("pointerup",s.bind(u)),e.addEventListener("pointercancel",s.bind(u)),e.addEventListener("pointerleave",s.bind(u))}),u}return s(t,e),t}(u.default);t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),u=n(2),c=i(u),l=n(12),p=i(l),f=n(11),h=i(f),d=function(e){function t(e,n){o(this,t);var i=r(this,Object.getPrototypeOf(t).call(this,e,n));i.popupContent=i.popup.querySelector(".popup__content");var s=new a.Vector2d(i.popupContent.clientWidth,i.popupContent.clientHeight),u=new a.Vector2d(64,64),c=new a.Vector2d(s.x,128),l=new h.default({zIndex:1,size:u,defaultPosition:new a.Vector2d(s.x/2-u.x/2,s.y/2)}),f=new p.default({zIndex:2,size:c,defaultPosition:new a.Vector2d(0,s.y/2)}),d={isSwiping:!1,startX:null,endX:null};return f.on("pointerdown",function(e){f.node.setPointerCapture(e.pointerId),f.disableTransition(),d.isSwiping=!0,d.startX=e.clientX}),f.on("pointermove",function(e){if(d.isSwiping){var t=e.clientX-d.startX;f.setTranslate(t,f.translate.y),f.render(function(){return f.updatePosition()})}}),f.on("pointerup pointercancel",function(){d.isSwiping=!1,f.enableTransition(),f.setTranslate(0,0),f.render(function(){return f.updatePosition()})}),l.on("pointerdown",function(){return i.unlock()}),i.popupContent.appendChild(l.node),i.popupContent.appendChild(f.node),l.initialize(),f.initialize(),i}return s(t,e),t}(c.default);t.default=d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(1),c=n(2),l=i(c),p=n(10),f=i(p),h=n(14),d=i(h),v=n(15),y=i(v),b=function(e){function t(e,n){o(this,t);var i=r(this,Object.getPrototypeOf(t).call(this,e,n)),s=i.popup.querySelector(".popup__content");i.popupContent=s,i.keysInLock=[],i.finishedKeys=[];var a=new u.Vector2d(64,64),c=new u.Vector2d(64,64),l=new u.Vector2d(128,128),p=s.clientWidth,h=s.clientHeight;return i._tryToInserKey=function(){var e=this,t=this.items.lock;this.keysInLock=this.keysInLock.reduce(function(n,i){return i.currentColor===t.currentColor?(e.finishedKeys.push(i),i.destroy()):n.push(i),n},[]),this.finishedKeys.length===this.items.keys.length&&this.unlock()}.bind(i),i.items={button:new f.default({size:a,defaultPosition:new u.Vector2d(.5*p-a.x/2,h-a.y),onPush:i._tryToInserKey}),keys:["red","green","blue"].map(function(e,t){return new d.default({currentColor:e,size:c,defaultPosition:new u.Vector2d(p*(.25*(t+1))-c.x/2,.1*h)})}),lock:new y.default({currentColor:"red",size:l,defaultPosition:new u.Vector2d(p/2-l.x/2,h/2-l.y/2),zIndex:0})},i.initializeButton(),i.initializeKeys(),i.initializeLock(),i}return s(t,e),a(t,[{key:"initializeButton",value:function(){var e=this.items.button;this.popupContent.appendChild(e.node),e.initialize()}},{key:"initializeKeys",value:function(){function e(e){if("key"===e.target.getAttribute("data-item-name")){var t=r.items.keys.filter(function(t){return t.id===parseInt(e.target.getAttribute("data-id"),10)})[0];t.disableTransition(),o[e.pointerId.toString()]={key:t,startPosition:new u.Vector2d(e.clientX,e.clientY),startTranslate:t.translate},s=!0}}function t(e){if(s){var t=o[e.pointerId.toString()],n=t.key,i=t.startPosition,r=t.startTranslate;n.setTranslate(r.x+(e.clientX-i.x),r.y+(e.clientY-i.y)),n.render()}}function n(e){if(s){var t=this.items.lock;s=!1;var n=o[e.pointerId.toString()].key;o[e.pointerId.toString()]=void 0,n.enableTransition();var i=(0,u.isBoxInsideAnother)(t.coordinates,t.size,n.coordinates,n.size),r=function(e){return function(t){return t.id===e}},a=function(e){return function(t){return t.id!==e}};i?this.keysInLock.some(r(n.id))||this.keysInLock.push(n):this.keysInLock=this.keysInLock.filter(a(n.id))}}var i=this,o={},r=this,s=!1;this.items.keys.forEach(function(e){i.popupContent.appendChild(e.node),e.initialize()}),this.popupContent.addEventListener("pointerdown",e.bind(this)),this.popupContent.addEventListener("pointermove",t.bind(this)),this.popupContent.addEventListener("pointerup",n.bind(this))}},{key:"initializeLock",value:function(){var e=this.items.lock,t={red:"green",green:"blue",blue:"red"};this.popupContent.appendChild(e.node),e.initialize(),setInterval(function(){e.switchColor(t[e.currentColor]),e.render()},150)}}]),t}(l.default);t.default=b},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function h(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:h(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},c=n(3),l=i(c),p=(n(1),{regular:"img/switchGreen.png",pressed:"img/switchGreen_pressed.png"}),f=function(e){function t(e){o(this,t);var n=r(this,Object.getPrototypeOf(t).call(this,Object.assign({},e,{name:"button",sprite:{url:p.regular}})));return n.classes.hidden=n.classes.base+"_hidden",n.classes.pressed=n.classes.base+"_pressed",n._onPress=function(){this.press(),e.onPush&&e.onPush()}.bind(n),n._onRelease=function(){this.release()}.bind(n),n}return s(t,e),a(t,[{key:"initialize",value:function(){u(Object.getPrototypeOf(t.prototype),"initialize",this).call(this),this.on("pointerdown",this._onPress),this.on("pointerup pointercancel pointerleave",this._onRelease)}},{key:"destroy",value:function(){u(Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.off("pointerdown",this._onPress),this.off("pointerup pointercancel pointerleave",this._onRelease)}},{key:"press",value:function(){this.setSprite({url:p.pressed}),this.render()}},{key:"release",value:function(){this.setSprite({url:p.regular}),this.render()}}]),t}(l.default);t.default=f},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),u=i(a),c=(n(1),function(e){function t(e){return o(this,t),r(this,Object.getPrototypeOf(t).call(this,Object.assign({},e,{name:"face",sprite:{url:"img/hudPlayer_green.png"}})))}return s(t,e),t}(u.default));t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),u=i(a),c=(n(1),function(e){function t(e){return o(this,t),r(this,Object.getPrototypeOf(t).call(this,Object.assign({},e,{name:"hasp",sprite:{url:"img/stoneHalf_mid.png",size:"auto 100%",repeat:"repeat-x"}})))}return s(t,e),t}(u.default));t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=i(a),c=function(e){function t(e){return o(this,t),r(this,Object.getPrototypeOf(t).call(this,Object.assign({},e,{name:"jewel",colors:{blueEmpty:{url:"img/hudJewel_blue_empty.png"},blueFilled:{url:"img/hudJewel_blue.png"}}})))}return s(t,e),t}(u.default);t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=i(a),c=function(e){function t(e){return o(this,t),r(this,Object.getPrototypeOf(t).call(this,Object.assign({},e,{name:"key",colors:{red:{url:"img/keyRed.png"},green:{url:"img/keyGreen.png"},blue:{url:"img/keyBlue.png"}}})))}return s(t,e),t}(u.default);t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=i(a),c=function(e){function t(e){return o(this,t),r(this,Object.getPrototypeOf(t).call(this,Object.assign({},e,{name:"lock",colors:{red:{url:"img/lockRed.png"},green:{url:"img/lockGreen.png"},blue:{url:"img/lockBlue.png"}}})))}return s(t,e),t}(u.default);t.default=c},function(e,t,n){/*!
	 * PEP v0.4.1 | https://github.com/jquery/PEP
	 * Copyright jQuery Foundation and other contributors | http://jquery.org/license
	 */
!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e,t){t=t||Object.create(null);var n=document.createEvent("Event");n.initEvent(e,t.bubbles||!1,t.cancelable||!1);for(var i,o=2;o<l.length;o++)i=l[o],n[i]=t[i]||p[o];n.buttons=t.buttons||0;var r=0;return r=t.pressure?t.pressure:n.buttons?.5:0,n.x=n.clientX,n.y=n.clientY,n.pointerId=t.pointerId||0,n.width=t.width||0,n.height=t.height||0,n.pressure=r,n.tiltX=t.tiltX||0,n.tiltY=t.tiltY||0,n.pointerType=t.pointerType||"",n.hwTimestamp=t.hwTimestamp||0,n.isPrimary=t.isPrimary||!1,n}function t(){this.array=[],this.size=0}function n(e,t,n,i){this.addCallback=e.bind(i),this.removeCallback=t.bind(i),this.changedCallback=n.bind(i),S&&(this.observer=new S(this.mutationWatcher.bind(this)))}function i(e){return"body /shadow-deep/ "+o(e)}function o(e){return'[touch-action="'+e+'"]'}function r(e){return"{ -ms-touch-action: "+e+"; touch-action: "+e+"; touch-action-delay: none; }"}function s(){if(L){I.forEach(function(e){String(e)===e?(x+=o(e)+r(e)+"\n",R&&(x+=i(e)+r(e)+"\n")):(x+=e.selectors.map(o)+r(e.rule)+"\n",R&&(x+=e.selectors.map(i)+r(e.rule)+"\n"))});var e=document.createElement("style");e.textContent=x,document.head.appendChild(e)}}function a(){if(!window.PointerEvent){if(window.PointerEvent=f,window.navigator.msPointerEnabled){var e=window.navigator.msMaxTouchPoints;Object.defineProperty(window.navigator,"maxTouchPoints",{value:e,enumerable:!0}),E.registerSource("ms",oe)}else E.registerSource("mouse",F),void 0!==window.ontouchstart&&E.registerSource("touch",ee);E.register(document)}}function u(e){if(!E.pointermap.has(e))throw new Error("InvalidPointerId")}function c(){window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:Q},releasePointerCapture:{value:Z}})}var l=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pageX","pageY"],p=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0],f=e,h=window.Map&&window.Map.prototype.forEach,d=h?Map:t;t.prototype={set:function(e,t){return void 0===t?this.delete(e):(this.has(e)||this.size++,void(this.array[e]=t))},has:function(e){return void 0!==this.array[e]},"delete":function(e){this.has(e)&&(delete this.array[e],this.size--)},get:function(e){return this.array[e]},clear:function(){this.array.length=0,this.size=0},forEach:function(e,t){return this.array.forEach(function(n,i){e.call(t,n,i,this)},this)}};var v=d,y=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","buttons","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","type","target","currentTarget","which","pageX","pageY","timeStamp"],b=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],m={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},w="undefined"!=typeof SVGElementInstance,g={pointermap:new v,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(e,t){var n=t,i=n.events;i&&(i.forEach(function(e){n[e]&&(this.eventMap[e]=n[e].bind(n))},this),this.eventSources[e]=n,this.eventSourceList.push(n))},register:function(e){for(var t,n=this.eventSourceList.length,i=0;i<n&&(t=this.eventSourceList[i]);i++)t.register.call(t,e)},unregister:function(e){for(var t,n=this.eventSourceList.length,i=0;i<n&&(t=this.eventSourceList[i]);i++)t.unregister.call(t,e)},contains:function(e,t){try{return e.contains(t)}catch(n){return!1}},down:function(e){e.bubbles=!0,this.fireEvent("pointerdown",e)},move:function(e){e.bubbles=!0,this.fireEvent("pointermove",e)},up:function(e){e.bubbles=!0,this.fireEvent("pointerup",e)},enter:function(e){e.bubbles=!1,this.fireEvent("pointerenter",e)},leave:function(e){e.bubbles=!1,this.fireEvent("pointerleave",e)},over:function(e){e.bubbles=!0,this.fireEvent("pointerover",e)},out:function(e){e.bubbles=!0,this.fireEvent("pointerout",e)},cancel:function(e){e.bubbles=!0,this.fireEvent("pointercancel",e)},leaveOut:function(e){this.out(e),this.contains(e.target,e.relatedTarget)||this.leave(e)},enterOver:function(e){this.over(e),this.contains(e.target,e.relatedTarget)||this.enter(e)},eventHandler:function(e){if(!e._handledByPE){var t=e.type,n=this.eventMap&&this.eventMap[t];n&&n(e),e._handledByPE=!0}},listen:function(e,t){t.forEach(function(t){this.addEvent(e,t)},this)},unlisten:function(e,t){t.forEach(function(t){this.removeEvent(e,t)},this)},addEvent:function(e,t){e.addEventListener(t,this.boundHandler)},removeEvent:function(e,t){e.removeEventListener(t,this.boundHandler)},makeEvent:function(e,t){this.captureInfo[t.pointerId]&&(t.relatedTarget=null);var n=new f(e,t);return t.preventDefault&&(n.preventDefault=t.preventDefault),n._target=n._target||t.target,n},fireEvent:function(e,t){var n=this.makeEvent(e,t);return this.dispatchEvent(n)},cloneEvent:function(e){for(var t,n=Object.create(null),i=0;i<y.length;i++)t=y[i],n[t]=e[t]||b[i],!w||"target"!==t&&"relatedTarget"!==t||n[t]instanceof SVGElementInstance&&(n[t]=n[t].correspondingUseElement);return e.preventDefault&&(n.preventDefault=function(){e.preventDefault()}),n},getTarget:function(e){var t=this.captureInfo[e.pointerId];return t?e._target!==t&&e.type in m?void 0:t:e._target},setCapture:function(e,t){this.captureInfo[e]&&this.releaseCapture(e),this.captureInfo[e]=t;var n=document.createEvent("Event");n.initEvent("gotpointercapture",!0,!1),n.pointerId=e,this.implicitRelease=this.releaseCapture.bind(this,e),document.addEventListener("pointerup",this.implicitRelease),document.addEventListener("pointercancel",this.implicitRelease),n._target=t,this.asyncDispatchEvent(n)},releaseCapture:function(e){var t=this.captureInfo[e];if(t){var n=document.createEvent("Event");n.initEvent("lostpointercapture",!0,!1),n.pointerId=e,this.captureInfo[e]=void 0,document.removeEventListener("pointerup",this.implicitRelease),document.removeEventListener("pointercancel",this.implicitRelease),n._target=t,this.asyncDispatchEvent(n)}},dispatchEvent:function(e){var t=this.getTarget(e);if(t)return t.dispatchEvent(e)},asyncDispatchEvent:function(e){requestAnimationFrame(this.dispatchEvent.bind(this,e))}};g.boundHandler=g.eventHandler.bind(g);var E=g,_={shadow:function(e){if(e)return e.shadowRoot||e.webkitShadowRoot},canTarget:function(e){return e&&Boolean(e.elementFromPoint)},targetingShadow:function(e){var t=this.shadow(e);if(this.canTarget(t))return t},olderShadow:function(e){var t=e.olderShadowRoot;if(!t){var n=e.querySelector("shadow");n&&(t=n.olderShadowRoot)}return t},allShadows:function(e){for(var t=[],n=this.shadow(e);n;)t.push(n),n=this.olderShadow(n);return t},searchRoot:function(e,t,n){if(e){var i,o,r=e.elementFromPoint(t,n);for(o=this.targetingShadow(r);o;){if(i=o.elementFromPoint(t,n)){var s=this.targetingShadow(i);return this.searchRoot(s,t,n)||i}o=this.olderShadow(o)}return r}},owner:function(e){for(var t=e;t.parentNode;)t=t.parentNode;return t.nodeType!==Node.DOCUMENT_NODE&&t.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(t=document),t},findTarget:function(e){var t=e.clientX,n=e.clientY,i=this.owner(e.target);return i.elementFromPoint(t,n)||(i=document),this.searchRoot(i,t,n)}},P=Array.prototype.forEach.call.bind(Array.prototype.forEach),O=Array.prototype.map.call.bind(Array.prototype.map),T=Array.prototype.slice.call.bind(Array.prototype.slice),k=Array.prototype.filter.call.bind(Array.prototype.filter),S=window.MutationObserver||window.WebKitMutationObserver,C="[touch-action]",j={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};n.prototype={watchSubtree:function(e){this.observer&&_.canTarget(e)&&this.observer.observe(e,j)},enableOnSubtree:function(e){this.watchSubtree(e),e===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(e)},installNewSubtree:function(e){P(this.findElements(e),this.addElement,this)},findElements:function(e){return e.querySelectorAll?e.querySelectorAll(C):[]},removeElement:function(e){this.removeCallback(e)},addElement:function(e){this.addCallback(e)},elementChanged:function(e,t){this.changedCallback(e,t)},concatLists:function(e,t){return e.concat(T(t))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===document.readyState&&this.installNewSubtree(document)}.bind(this))},isElement:function(e){return e.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(e){var t=O(e,this.findElements,this);return t.push(k(e,this.isElement)),t.reduce(this.concatLists,[])},mutationWatcher:function(e){e.forEach(this.mutationHandler,this)},mutationHandler:function(e){if("childList"===e.type){var t=this.flattenMutationTree(e.addedNodes);t.forEach(this.addElement,this);var n=this.flattenMutationTree(e.removedNodes);n.forEach(this.removeElement,this)}else"attributes"===e.type&&this.elementChanged(e.target,e.oldValue)}};var M=n,I=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],x="",L=window.PointerEvent||window.MSPointerEvent,R=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,z=E.pointermap,D=25,Y=[1,4,2,8,16],X=!1;try{X=1===new MouseEvent("test",{buttons:1}).buttons}catch(V){}var N,A={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(e){E.listen(e,this.events)},unregister:function(e){E.unlisten(e,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(e){for(var t,n=this.lastTouches,i=e.clientX,o=e.clientY,r=0,s=n.length;r<s&&(t=n[r]);r++){var a=Math.abs(i-t.x),u=Math.abs(o-t.y);if(a<=D&&u<=D)return!0}},prepareEvent:function(e){var t=E.cloneEvent(e),n=t.preventDefault;return t.preventDefault=function(){e.preventDefault(),n()},t.pointerId=this.POINTER_ID,t.isPrimary=!0,t.pointerType=this.POINTER_TYPE,t},prepareButtonsForMove:function(e,t){var n=z.get(this.POINTER_ID);e.buttons=n?n.buttons:0,t.buttons=e.buttons},mousedown:function(e){if(!this.isEventSimulatedFromTouch(e)){var t=z.get(this.POINTER_ID),n=this.prepareEvent(e);X||(n.buttons=Y[n.button],t&&(n.buttons|=t.buttons),e.buttons=n.buttons),z.set(this.POINTER_ID,e),t?E.move(n):E.down(n)}},mousemove:function(e){if(!this.isEventSimulatedFromTouch(e)){var t=this.prepareEvent(e);X||this.prepareButtonsForMove(t,e),E.move(t)}},mouseup:function(e){if(!this.isEventSimulatedFromTouch(e)){var t=z.get(this.POINTER_ID),n=this.prepareEvent(e);if(!X){var i=Y[n.button];n.buttons=t?t.buttons&~i:0,e.buttons=n.buttons}z.set(this.POINTER_ID,e),0===n.buttons||n.buttons===Y[n.button]?(this.cleanupMouse(),E.up(n)):E.move(n)}},mouseover:function(e){if(!this.isEventSimulatedFromTouch(e)){var t=this.prepareEvent(e);X||this.prepareButtonsForMove(t,e),E.enterOver(t)}},mouseout:function(e){if(!this.isEventSimulatedFromTouch(e)){var t=this.prepareEvent(e);X||this.prepareButtonsForMove(t,e),E.leaveOut(t)}},cancel:function(e){var t=this.prepareEvent(e);E.cancel(t),this.cleanupMouse()},cleanupMouse:function(){z.delete(this.POINTER_ID)}},F=A,K=E.captureInfo,q=_.findTarget.bind(_),B=_.allShadows.bind(_),H=E.pointermap,U=2500,G=200,W="touch-action",J=!1,$={events:["touchstart","touchmove","touchend","touchcancel"],register:function(e){J?E.listen(e,this.events):N.enableOnSubtree(e)},unregister:function(e){J&&E.unlisten(e,this.events)},elementAdded:function(e){var t=e.getAttribute(W),n=this.touchActionToScrollType(t);n&&(e._scrollType=n,E.listen(e,this.events),B(e).forEach(function(e){e._scrollType=n,E.listen(e,this.events)},this))},elementRemoved:function(e){e._scrollType=void 0,E.unlisten(e,this.events),B(e).forEach(function(e){e._scrollType=void 0,E.unlisten(e,this.events)},this)},elementChanged:function(e,t){var n=e.getAttribute(W),i=this.touchActionToScrollType(n),o=this.touchActionToScrollType(t);i&&o?(e._scrollType=i,B(e).forEach(function(e){e._scrollType=i},this)):o?this.elementRemoved(e):i&&this.elementAdded(e)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(e){var t=e,n=this.scrollTypes;return"none"===t?"none":t===n.XSCROLLER?"X":t===n.YSCROLLER?"Y":n.SCROLLER.exec(t)?"XY":void 0},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(e){return this.firstTouch===e.identifier},setPrimaryTouch:function(e){(0===H.size||1===H.size&&H.has(1))&&(this.firstTouch=e.identifier,this.firstXY={X:e.clientX,Y:e.clientY},this.scrolling=!1,this.cancelResetClickCount())},removePrimaryPointer:function(e){e.isPrimary&&(this.firstTouch=null,this.firstXY=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var e=function(){this.clickCount=0,this.resetId=null}.bind(this);this.resetId=setTimeout(e,G)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(e){var t=0;return"touchstart"!==e&&"touchmove"!==e||(t=1),t},touchToPointer:function(e){var t=this.currentTouchEvent,n=E.cloneEvent(e),i=n.pointerId=e.identifier+2;n.target=K[i]||q(n),n.bubbles=!0,n.cancelable=!0,n.detail=this.clickCount,n.button=0,n.buttons=this.typeToButtons(t.type),n.width=e.radiusX||e.webkitRadiusX||0,n.height=e.radiusY||e.webkitRadiusY||0,n.pressure=e.force||e.webkitForce||.5,n.isPrimary=this.isPrimaryTouch(e),n.pointerType=this.POINTER_TYPE;var o=this;return n.preventDefault=function(){o.scrolling=!1,o.firstXY=null,t.preventDefault()},n},processTouches:function(e,t){var n=e.changedTouches;this.currentTouchEvent=e;for(var i,o=0;o<n.length;o++)i=n[o],t.call(this,this.touchToPointer(i))},shouldScroll:function(e){if(this.firstXY){var t,n=e.currentTarget._scrollType;if("none"===n)t=!1;else if("XY"===n)t=!0;else{var i=e.changedTouches[0],o=n,r="Y"===n?"X":"Y",s=Math.abs(i["client"+o]-this.firstXY[o]),a=Math.abs(i["client"+r]-this.firstXY[r]);t=s>=a}return this.firstXY=null,t}},findTouch:function(e,t){for(var n,i=0,o=e.length;i<o&&(n=e[i]);i++)if(n.identifier===t)return!0},vacuumTouches:function(e){var t=e.touches;if(H.size>=t.length){var n=[];H.forEach(function(e,i){if(1!==i&&!this.findTouch(t,i-2)){var o=e.out;n.push(o)}},this),n.forEach(this.cancelOut,this)}},touchstart:function(e){this.vacuumTouches(e),this.setPrimaryTouch(e.changedTouches[0]),this.dedupSynthMouse(e),this.scrolling||(this.clickCount++,this.processTouches(e,this.overDown))},overDown:function(e){H.set(e.pointerId,{target:e.target,out:e,outTarget:e.target}),E.over(e),E.enter(e),E.down(e)},touchmove:function(e){this.scrolling||(this.shouldScroll(e)?(this.scrolling=!0,this.touchcancel(e)):(e.preventDefault(),this.processTouches(e,this.moveOverOut)))},moveOverOut:function(e){var t=e,n=H.get(t.pointerId);if(n){var i=n.out,o=n.outTarget;E.move(t),i&&o!==t.target&&(i.relatedTarget=t.target,t.relatedTarget=o,i.target=o,t.target?(E.leaveOut(i),E.enterOver(t)):(t.target=o,t.relatedTarget=null,this.cancelOut(t))),n.out=t,n.outTarget=t.target}},touchend:function(e){this.dedupSynthMouse(e),this.processTouches(e,this.upOut)},upOut:function(e){this.scrolling||(E.up(e),E.out(e),E.leave(e)),this.cleanUpPointer(e)},touchcancel:function(e){this.processTouches(e,this.cancelOut)},cancelOut:function(e){E.cancel(e),E.out(e),E.leave(e),this.cleanUpPointer(e)},cleanUpPointer:function(e){H.delete(e.pointerId),this.removePrimaryPointer(e)},dedupSynthMouse:function(e){var t=F.lastTouches,n=e.changedTouches[0];if(this.isPrimaryTouch(n)){var i={x:n.clientX,y:n.clientY};t.push(i);var o=function(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}.bind(null,t,i);setTimeout(o,U)}}};J||(N=new M($.elementAdded,$.elementRemoved,$.elementChanged,$));var Q,Z,ee=$,te=E.pointermap,ne=window.MSPointerEvent&&"number"==typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,ie={events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],register:function(e){E.listen(e,this.events)},unregister:function(e){E.unlisten(e,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(e){var t=e;return ne&&(t=E.cloneEvent(e),t.pointerType=this.POINTER_TYPES[e.pointerType]),t},cleanup:function(e){te.delete(e)},MSPointerDown:function(e){te.set(e.pointerId,e);var t=this.prepareEvent(e);E.down(t)},MSPointerMove:function(e){var t=this.prepareEvent(e);E.move(t)},MSPointerUp:function(e){var t=this.prepareEvent(e);E.up(t),this.cleanup(e.pointerId)},MSPointerOut:function(e){var t=this.prepareEvent(e);E.leaveOut(t)},MSPointerOver:function(e){var t=this.prepareEvent(e);E.enterOver(t)},MSPointerCancel:function(e){var t=this.prepareEvent(e);E.cancel(t),this.cleanup(e.pointerId)},MSLostPointerCapture:function(e){var t=E.makeEvent("lostpointercapture",e);E.dispatchEvent(t)},MSGotPointerCapture:function(e){var t=E.makeEvent("gotpointercapture",e);E.dispatchEvent(t)}},oe=ie,re=window.navigator;re.msPointerEnabled?(Q=function(e){u(e),this.msSetPointerCapture(e)},Z=function(e){u(e),this.msReleasePointerCapture(e)}):(Q=function(e){u(e),E.setCapture(e,this)},Z=function(e){u(e),E.releaseCapture(e,this)}),s(),a(),c();var se={dispatcher:E,Installer:M,PointerEvent:f,PointerMap:v,targetFinding:_};return se})}]);
//# sourceMappingURL=bundle.js.map